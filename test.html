<!DOCTYPE html>
<html>

<head>
	<title>ChibiProto and ChibiClass Tests</title>
	<script src="ChibiProto.js"></script>
	<script src="ChibiClass.js"></script>
</head>

<body>
	<h1>ChibiProto Tests</h1>
	<pre id="ChibiProtoCode">
	log('begin ChibiProto tests');

	var Person = ChibiProto.extend({
		constructor: function(name) {
			this.name = name;
		},
		hello: function() {
			log("hello, my name is " + this.name);
			console.log(this);
		},
		askAge: function () {
			log("How old do I look?");
		}
	});

	Person.mProp = true;

	var Child = Person.extend({
		constructor: function(name, age) {
			Person.constructor.call(this, name);
			this.age = age;
		},
		askAge: function () {
			log('I am ' + this.age + ' years old!');
		}
	});

	var person1 = Person.construct('bob');
	var child1 = Child.construct('max', 12);

	person1.hello();
	person1.askAge();
	child1.hello();
	child1.askAge();

	log('Child inherits Person.mProp? ' + (Child.mProp ? 'yes' : 'no'));
	</pre>
	<div id="ChibiProtoLog" class="log"></div>

	<h1>ChibiClass Tests</h1>
	<pre id="ChibiClassCode">
	log('begin ChibiClass tests');

	var Person = ChibiClass({
		constructor: function(name) {
			this.name = name;
		},
		hello: function() {
			log("hello, my name is " + this.name);
			console.log(this);
		},
		askAge: function () {
			log("How old do I look?");
		}
	});

	Person.mProp = true;

	var Child = Person.extend({
		constructor: function(name, age) {
			Person.constructor.call(this, name);
			this.age = age;
		},
		askAge: function () {
			log('I am ' + this.age + ' years old!');
		}
	});

	var person1 = Person('bob');
	var child1 = Child('max', 12);

	person1.hello();
	person1.askAge();
	child1.hello();
	child1.askAge();

	log('Child inherits Person.mProp? ' + (Child.mProp ? 'yes' : 'no'));
	</pre>
	<div id="ChibiClassLog" class="log"></div>
	<script>
	var currentlyRunning;

	var tests = [
		{
			code: document.getElementById('ChibiProtoCode').innerHTML,
			log: document.getElementById('ChibiProtoLog'),
		}, {
			code: document.getElementById('ChibiClassCode').innerHTML,
			log: document.getElementById('ChibiClassLog'),
		},
	];

	function log(text) {
		var elem = document.createElement('p');
		elem.innerHTML = text;
		currentlyRunning.log.appendChild(elem);
		console.log(text);
	}

	tests.forEach(function (test) {
		currentlyRunning = test;
		var script = document.createElement('script');
		script.innerHTML = test.code;
		document.body.appendChild(script);
	});

	</script>
</body>

</html>
